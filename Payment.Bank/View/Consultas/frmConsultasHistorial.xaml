<Controls:MetroWindow TitleCaps="False" x:Class="Payment.Bank.View.Consultas.frmConsultasHistorial" xmlns:local="clr-namespace:Payment.Bank.Helpers"  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro" Title="titleQueriesCreditHistory" ShowTitleBar="True" TitlebarHeight="60" ShowIconOnTitleBar="True" TitleAlignment="Left" Height="600" Width="800" WindowStartupLocation="CenterScreen" ResizeMode="NoResize" BorderThickness="1" ShowCloseButton="False" WindowTitleBrush="{StaticResource BackgroundHeader}" TitleForeground="White" GlowBrush="{DynamicResource BackgroundHeader}" ShowInTaskbar="False">
    <Grid x:Name="LayoutRoot" Background="White">
        <Grid.Resources>
            <local:ImageSourceConverter x:Key="ImageSourceConverter" />

            <local:AtrasosColorConverter x:Key="CuotasColorConverter" />
        </Grid.Resources>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="20" />
            <ColumnDefinition Width="98*" />
            <ColumnDefinition Width="20" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="70*" />
            <RowDefinition Height="70" />
        </Grid.RowDefinitions>
        <Grid Name="gridMenu" DataContext="{Binding}" Grid.Row="0" Width="Auto" Background="Transparent" Grid.Column="1" Margin="0,0,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Grid Name="gridDatosPersonales">

                <TextBlock  Margin="230,25,0,0" Name="lblDocumento" TextWrapping="Wrap" Text="{Binding Path=Documento}" VerticalAlignment="Top" HorizontalAlignment="Left" Width="201" Height="25"/>
                <TextBlock  Margin="230,49,0,0" Name="lblNombres" TextWrapping="Wrap" Text="{Binding Path=Nombres}" VerticalAlignment="Top" HorizontalAlignment="Left" Width="201" Height="25"/>
                <TextBlock  Margin="230,75,0,0" Name="lblApellidos" TextWrapping="Wrap" Text="{Binding Path=Apellidos}" VerticalAlignment="Top" HorizontalAlignment="Left" Width="201" Height="25"/>
                <TextBlock  Margin="230,101,0,0" Name="lblDireccion" TextWrapping="Wrap" Text="{Binding Path=Direccion}" VerticalAlignment="Top" HorizontalAlignment="Left" Width="326" Height="47"/>
                <TextBlock  Margin="0,25,16,0" Name="lblCiudades" TextWrapping="Wrap" Text="{Binding Path=Ciudades.Ciudad}" VerticalAlignment="Top" HorizontalAlignment="Right" TextAlignment="Left" Width="87" Height="25"/>
                <TextBlock  Margin="0,52,16,0" Name="lblDateBirth" TextWrapping="Wrap" Text="{Binding Path=FechaNacimiento, StringFormat=dd/MM/yyyy}" VerticalAlignment="Top" HorizontalAlignment="Right" TextAlignment="Left" Width="87" Height="25"/>
                <TextBlock  Margin="0,75,16,0" Name="lblTelefono" TextWrapping="Wrap" Text="{Binding Path=Telefono, StringFormat=N2}" VerticalAlignment="Top" HorizontalAlignment="Right" TextAlignment="Left" Width="87" Height="25"/>
                <TextBlock  Margin="0,101,16,0" Name="lblCelular" TextWrapping="Wrap" Text="{Binding Path=Celular}" VerticalAlignment="Top" HorizontalAlignment="Right" TextAlignment="Left" Width="87" Height="25"/>

                <Border Background="Transparent" BorderBrush="black" BorderThickness="1" CornerRadius="5,5,5,5" HorizontalAlignment="Left" Margin="20,11,0,0" x:Name="BorderPhotoSrc" Width="110" Height=" 125" VerticalAlignment="Top">
                    <Grid x:Name="gridPhotoSrc">
                        <Image DataContext="{Binding}" Margin="2,2,2,2" x:Name="photoUsuario" Stretch="Fill" Source="{Binding Path=Fotografias.Foto, Mode=TwoWay, Converter={StaticResource ImageSourceConverter}}">
                            <Image.Effect>
                                <DropShadowEffect BlurRadius="10" Color="#FF5D7183" Opacity="0.5" ShadowDepth="0" />
                            </Image.Effect>
                        </Image>
                    </Grid>
                </Border>

            </Grid>


            <TextBlock Text="lblLastName" HorizontalAlignment="Left" Margin="135,74,0,0" TextAlignment="Right" TextWrapping="Wrap" VerticalAlignment="Top" Width="80"/>
            <TextBlock Text="lblNames" HorizontalAlignment="Left" Margin="135,49,0,0" TextAlignment="Right" TextWrapping="Wrap"  VerticalAlignment="Top" Width="80"/>
            <TextBlock Text="lblDocument" HorizontalAlignment="Left" Margin="135,24,0,0" TextAlignment="Right" TextWrapping="Wrap" VerticalAlignment="Top" Width="80"/>
            <TextBlock Text="lblAddress" HorizontalAlignment="Left" TextAlignment="Right" Margin="135,99,0,0" TextWrapping="Wrap"  VerticalAlignment="Top" Width="80"/>
            <TextBlock HorizontalAlignment="Right" Margin="0,50,112,0" TextWrapping="Wrap" TextAlignment="Right" Text="lblDateBirth" VerticalAlignment="Top" Width="158"/>
            <TextBlock HorizontalAlignment="Right" Margin="0,75,112,0" TextWrapping="Wrap" TextAlignment="Right" Text="lblPhone" VerticalAlignment="Top" Width="112"/>
            <TextBlock HorizontalAlignment="Right" Margin="0,100,112,0" TextWrapping="Wrap" TextAlignment="Right" Text="lblCellular" VerticalAlignment="Top" Width="153"/>
            <TextBlock HorizontalAlignment="Right" Margin="0,24,112,0" TextWrapping="Wrap" TextAlignment="Right" Text="lblCiudad" VerticalAlignment="Top" Width="153"/>

            <DataGrid AutoGenerateColumns="False" Margin="0,10,0,10" Name="dataGrid1" Grid.Row="1" ItemsSource="{Binding}" CanUserAddRows="False" CanUserDeleteRows="False" CanUserResizeColumns="False" CanUserResizeRows="False" HeadersVisibility="Column" HorizontalScrollBarVisibility="Hidden">
                <DataGrid.Columns>
                    <DataGridTemplateColumn Header="colDate" x:Name="colDate" Width="100">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Fecha,StringFormat=dd/MM/yyyy}" Margin="0,0,5,0" TextAlignment="Left" VerticalAlignment="Center">
                                    <TextBlock.Foreground>
                                        <MultiBinding Converter="{StaticResource CuotasColorConverter}">
                                            <Binding Path="Atraso" />
                                            <Binding Path="Balance" />
                                        </MultiBinding>
                                    </TextBlock.Foreground>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="colBusiness" Width="*" IsReadOnly="True" >
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Empresa}" Margin="0,0,5,0" TextAlignment="Left" VerticalAlignment="Center">
                                    <TextBlock.Foreground>
                                        <MultiBinding Converter="{StaticResource CuotasColorConverter}">
                                            <Binding Path="Atraso" />
                                            <Binding Path="Balance" />
                                        </MultiBinding>
                                    </TextBlock.Foreground>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="colAmount" Width="100" IsReadOnly="True"  >
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Monto,StringFormat=N2}" Margin="0,0,5,0" TextAlignment="Right" VerticalAlignment="Center">
                                    <TextBlock.Foreground>
                                        <MultiBinding Converter="{StaticResource CuotasColorConverter}">
                                            <Binding Path="Atraso" />
                                            <Binding Path="Balance" />
                                        </MultiBinding>
                                    </TextBlock.Foreground>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="colBalance" Width="100" IsReadOnly="True" >
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Balance,StringFormat=N2}" Margin="0,0,5,0" TextAlignment="Right" VerticalAlignment="Center">
                                    <TextBlock.Foreground>
                                        <MultiBinding Converter="{StaticResource CuotasColorConverter}">
                                            <Binding Path="Atraso" />
                                            <Binding Path="Balance" />
                                        </MultiBinding>
                                    </TextBlock.Foreground>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="lblAtraso" Width="100" IsReadOnly="True" >
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Atraso,StringFormat=N2}" Margin="0,0,5,0" TextAlignment="Right" VerticalAlignment="Center">
                                    <TextBlock.Foreground>
                                        <MultiBinding Converter="{StaticResource CuotasColorConverter}">
                                            <Binding Path="Atraso" />
                                            <Binding Path="Balance" />
                                        </MultiBinding>
                                    </TextBlock.Foreground>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn Header="colStatus" Width="100" IsReadOnly="True" >
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Status}" Margin="0,0,5,0" TextAlignment="Center" VerticalAlignment="Center">
                                    <TextBlock.Foreground>
                                        <MultiBinding Converter="{StaticResource CuotasColorConverter}">
                                            <Binding Path="Atraso" />
                                            <Binding Path="Balance" />
                                        </MultiBinding>
                                    </TextBlock.Foreground>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>

        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,10,0" Grid.Column="1" VerticalAlignment="Top" Height="55" Grid.Row="2">
            <TextBox Name="txtMonto" Visibility="Collapsed" HorizontalAlignment="Right" Height="26" Margin="0,16,10,0" Grid.Row="1" Text="{Binding Monto, StringFormat=N2, Mode=TwoWay, ValidatesOnDataErrors=True, ValidatesOnExceptions=True}" TextWrapping="Wrap" TabIndex="0" TextAlignment="Right" Width="90"  Grid.Column="1" VerticalAlignment="Top"/>
            <Button Height="55"  Visibility="Collapsed" Margin="0" Name="btnAceptar" Width="55" IsDefault="True">
                <Image Width="40" Height="40" Source="/Images/check.png" />
            </Button>
            <Button Height="50"  Visibility="Collapsed" Margin="0" Name="btnNotaDebito" Width="50" IsDefault="True">
                <Image Width="35" Height="35" Source="/Images/NotaDebito.png" />
            </Button>
            <Button Height="50"  Visibility="Collapsed" Margin="0" Name="btnNotaCredito" Width="50" IsDefault="True">
                <Image Width="35" Height="35" Source="/Images/NotaCredito.png" />
            </Button>
            <Button Height="55"   Margin="0" Name="btnSalir" Width="55" IsCancel="False">
                <Image Width="40" Height="40" Source="/Images/back.png" />
            </Button>
        </StackPanel>

    </Grid>
</Controls:MetroWindow>
