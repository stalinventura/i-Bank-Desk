<Window x:Class="Payment.Bank.View.Consultas.frmConsultasCuotas" xmlns:local="clr-namespace:Payment.Bank.Helpers"  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Title="titleQueriesCuotas" Height="600" Width="800" WindowStartupLocation="CenterScreen" AllowsTransparency="True" BorderThickness="1" BorderBrush="{StaticResource BackgroundHeader}" WindowStyle="None" >
    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.Resources>
            <local:ImageSourceConverter x:Key="ImageSourceConverter" />
            <local:RiesgoColorConverter x:Key="RiesgoColorConverter"/>
            <local:CuotasColorConverter x:Key="CuotasColorConverter" />
        </Grid.Resources>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="20" />
            <ColumnDefinition Width="98*" />
            <ColumnDefinition Width="20" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="60"/>
            <RowDefinition Height="70*" />
            <RowDefinition Height="70" />
        </Grid.RowDefinitions>

        <DockPanel Background="{StaticResource BackgroundHeader}" Grid.Row="0" Grid.ColumnSpan="3" Grid.Column="0">
            <Grid x:Name="gridTitulo">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="100*"/>
                    <ColumnDefinition Width="auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock HorizontalAlignment="Left" Margin="10,15,0,0" Grid.Column="1" TextWrapping="Wrap" Text="titleQueriesCuotas" Foreground="White" FontSize="18" VerticalAlignment="Top" Width="339" Height="24"/>

                <Grid x:Name="gridPanel" Grid.Column="1">
                    <TextBlock Text="0.00%" x:Name="lblRiesgo" Margin="714,0,-10,18" Foreground="LightGray" TextAlignment="Center" TextWrapping="Wrap" VerticalAlignment="Bottom" FontWeight="Bold"  Width="95" Height="25" Grid.ColumnSpan="2" Grid.Column="1"/>
                    <TextBlock Text="RIESGO" FontSize="9"  Margin="713,0,-10,4" Foreground="LightGray" TextAlignment="Center" TextWrapping="Wrap" VerticalAlignment="Bottom" FontWeight="Bold"  Width="95" Height="25" Grid.ColumnSpan="2" Grid.Column="1"/>
                    <Border x:Name="BorderPhotoSrc" BorderBrush="{Binding Path=Riesgo, Converter={StaticResource RiesgoColorConverter}}" Height="56" Width="56" CornerRadius="26" BorderThickness="2" HorizontalAlignment="Right" Grid.Column="1" Margin="10,2"/>
                </Grid>
            </Grid>
        </DockPanel>
        <Grid Name="gridMenu" DataContext="{Binding}" Grid.Row="1" Width="Auto" Background="Transparent" Grid.Column="1" Margin="0,0,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Grid Name="gridDatosPersonales">

                <TextBlock  Margin="230,25,0,0" Name="lblDocumento" TextWrapping="Wrap" Text="{Binding Path=Solicitudes.Clientes.Personas.Documento}" VerticalAlignment="Top" HorizontalAlignment="Left" Width="201" Height="25"/>
                <TextBlock  Margin="230,49,0,0" Name="lblNombres" TextWrapping="Wrap" Text="{Binding Path=Solicitudes.Clientes.Personas.Nombres}" VerticalAlignment="Top" HorizontalAlignment="Left" Width="201" Height="25"/>
                <TextBlock  Margin="230,75,0,0" Name="lblApellidos" TextWrapping="Wrap" Text="{Binding Path=Solicitudes.Clientes.Personas.Apellidos}" VerticalAlignment="Top" HorizontalAlignment="Left" Width="201" Height="25"/>
                <TextBlock  Margin="230,99,0,0" Name="lblCiudad" TextWrapping="Wrap" Text="{Binding Path=Solicitudes.Clientes.Personas.Ciudades.Ciudad}" VerticalAlignment="Top" HorizontalAlignment="Left" Width="201" Height="25"/>
                <TextBlock  Margin="0,25,16,0" Name="lblContrato" FontWeight="Bold" TextWrapping="Wrap" Text="{Binding Path=ContratoID}" VerticalAlignment="Top" HorizontalAlignment="Right" TextAlignment="Right" Width="108" Height="25"/>
                <TextBlock  Margin="0,52,16,0" Name="lblFecha" TextWrapping="Wrap" Text="{Binding Path=Fecha, StringFormat=dd/MM/yyyy}" VerticalAlignment="Top" HorizontalAlignment="Right" TextAlignment="Right" Width="108" Height="25"/>
                <TextBlock  Margin="0,76,16,0" Name="lblMonto" TextWrapping="Wrap" Text="{Binding Path=Solicitudes.Monto, StringFormat=N3}" VerticalAlignment="Top" HorizontalAlignment="Right" TextAlignment="Right" Width="108" Height="25"/>
                <TextBlock  Margin="0,102,16,0" Name="lblInteres" TextWrapping="Wrap" Text="{Binding Path=Interes}" VerticalAlignment="Top" HorizontalAlignment="Right" TextAlignment="Right" Width="108" Height="25"/>
                <TextBlock  Margin="0,127,16,0" Name="lblMoras" TextWrapping="Wrap" Text="{Binding Path=Mora}" VerticalAlignment="Top" HorizontalAlignment="Right" TextAlignment="Right" Width="108" Height="25"/>

                <Border Background="Transparent" DataContext="{Binding}" BorderBrush="LightGray" BorderThickness="1" CornerRadius="5,5,5,5" HorizontalAlignment="Left" Margin="20,11,0,0"  Width="110" Height=" 125" VerticalAlignment="Top">
                    <Grid x:Name="gridPhotoSrc">
                        <Image DataContext="{Binding}" Margin="2,2,2,2" x:Name="photoUsuario" Stretch="Fill" Source="{Binding Path=Solicitudes.Clientes.Personas.Fotografias.Foto, Mode=TwoWay, Converter={StaticResource ImageSourceConverter}}">
                            <Image.Effect>
                                <DropShadowEffect BlurRadius="10" Color="#FF5D7183" Opacity="0.5" ShadowDepth="0" />
                            </Image.Effect>
                        </Image>
                    </Grid>
                </Border>

            </Grid>


            <TextBlock Text="lblLastName" HorizontalAlignment="Left" Margin="135,74,0,0" TextAlignment="Right" TextWrapping="Wrap" VerticalAlignment="Top" Width="80"/>
            <TextBlock Text="lblNames" HorizontalAlignment="Left" Margin="135,49,0,0" TextAlignment="Right" TextWrapping="Wrap"  VerticalAlignment="Top" Width="80"/>
            <TextBlock Text="lblDocument" HorizontalAlignment="Left" Margin="135,24,0,0" TextAlignment="Right" TextWrapping="Wrap" VerticalAlignment="Top" Width="80"/>
            <TextBlock Text="lblCiudad" HorizontalAlignment="Left" TextAlignment="Right" Margin="135,99,0,0" TextWrapping="Wrap"  VerticalAlignment="Top" Width="80"/>
            <TextBlock HorizontalAlignment="Right" Margin="0,50,112,0" TextWrapping="Wrap" TextAlignment="Right" Text="lblDateOfContract" VerticalAlignment="Top" Width="158"/>
            <TextBlock HorizontalAlignment="Right" Margin="0,75,112,0" TextWrapping="Wrap" TextAlignment="Right" Text="lblMonto" VerticalAlignment="Top" Width="112"/>
            <TextBlock HorizontalAlignment="Right" Margin="0,100,112,0" TextWrapping="Wrap" TextAlignment="Right" Text="lblInterestRate" VerticalAlignment="Top" Width="153"/>
            <TextBlock Margin="0,125,112,0" TextWrapping="Wrap" Text="lblLateFees" TextAlignment="Right" VerticalAlignment="Top" HorizontalAlignment="Right" Width="201"/>
            <TextBlock HorizontalAlignment="Right" Margin="0,24,112,0" TextWrapping="Wrap" TextAlignment="Right" Text="lblContract" VerticalAlignment="Top" Width="153"/>

            <DataGrid AutoGenerateColumns="False" Margin="0,10,0,10" Name="dataGrid1" Grid.Row="1" ItemsSource="{Binding}" CanUserAddRows="False" CanUserDeleteRows="False" CanUserResizeColumns="False" CanUserResizeRows="False" HeadersVisibility="Column" HorizontalScrollBarVisibility="Hidden">
                <DataGrid.Columns>
                    <DataGridTemplateColumn Header="colNumber" Width="80" IsReadOnly="True">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Numero, StringFormat=000}" Margin="0,0,5,0" TextAlignment="Center" VerticalAlignment="Center">
                                    <TextBlock.Foreground>
                                        <MultiBinding Converter="{StaticResource CuotasColorConverter}">
                                            <Binding Path="Vence" />
                                            <Binding Path="Balance" />
                                        </MultiBinding>
                                    </TextBlock.Foreground>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="colExpirationDate" x:Name="colExpirationDate" Width="80">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Vence,StringFormat=dd/MM/yyyy}" Margin="0,0,5,0" TextAlignment="Right" VerticalAlignment="Center">
                                    <TextBlock.Foreground>
                                        <MultiBinding Converter="{StaticResource CuotasColorConverter}">
                                            <Binding Path="Vence" />
                                            <Binding Path="Balance" />
                                        </MultiBinding>
                                    </TextBlock.Foreground>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="colCapital" Width="80" IsReadOnly="True" >
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Capital,StringFormat=N3}" Margin="0,0,5,0" TextAlignment="Right" VerticalAlignment="Center">
                                    <TextBlock.Foreground>
                                        <MultiBinding Converter="{StaticResource CuotasColorConverter}">
                                            <Binding Path="Vence" />
                                            <Binding Path="Balance" />
                                        </MultiBinding>
                                    </TextBlock.Foreground>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="colComission" Width="80" IsReadOnly="True"  >
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Comision,StringFormat=N3}" Margin="0,0,5,0" TextAlignment="Right" VerticalAlignment="Center">
                                    <TextBlock.Foreground>
                                        <MultiBinding Converter="{StaticResource CuotasColorConverter}">
                                            <Binding Path="Vence" />
                                            <Binding Path="Balance" />
                                        </MultiBinding>
                                    </TextBlock.Foreground>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="colInterest" Width="80" IsReadOnly="True" >
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Interes,StringFormat=N3}" Margin="0,0,5,0" TextAlignment="Right" VerticalAlignment="Center">
                                    <TextBlock.Foreground>
                                        <MultiBinding Converter="{StaticResource CuotasColorConverter}">
                                            <Binding Path="Vence" />
                                            <Binding Path="Balance" />
                                        </MultiBinding>
                                    </TextBlock.Foreground>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="colLateFees" Width="80" IsReadOnly="True" >
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Mora,StringFormat=N3}" Margin="0,0,5,0" TextAlignment="Right" VerticalAlignment="Center">
                                    <TextBlock.Foreground>
                                        <MultiBinding Converter="{StaticResource CuotasColorConverter}">
                                            <Binding Path="Vence" />
                                            <Binding Path="Balance" />
                                        </MultiBinding>
                                    </TextBlock.Foreground>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="colLegal" Width="80" IsReadOnly="True" >
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Legal,StringFormat=N3}" Margin="0,0,5,0" TextAlignment="Right" VerticalAlignment="Center">
                                    <TextBlock.Foreground>
                                        <MultiBinding Converter="{StaticResource CuotasColorConverter}">
                                            <Binding Path="Vence" />
                                            <Binding Path="Balance" />
                                        </MultiBinding>
                                    </TextBlock.Foreground>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn Header="colInsurance" Width="80" IsReadOnly="True" >
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Seguro,StringFormat=N3}" Margin="0,0,5,0" TextAlignment="Right" VerticalAlignment="Center">
                                    <TextBlock.Foreground>
                                        <MultiBinding Converter="{StaticResource CuotasColorConverter}">
                                            <Binding Path="Vence" />
                                            <Binding Path="Balance" />
                                        </MultiBinding>
                                    </TextBlock.Foreground>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn Header="colBalance" Width="*" IsReadOnly="True">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Balance,StringFormat=N2}" Margin="0,0,5,0" TextAlignment="Right" VerticalAlignment="Center">
                                    <TextBlock.Foreground>
                                        <MultiBinding Converter="{StaticResource CuotasColorConverter}">
                                            <Binding Path="Vence" />
                                            <Binding Path="Balance" />
                                        </MultiBinding>
                                    </TextBlock.Foreground>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
            <!--<TextBlock Text="0.00%" x:Name="lblRiesgo" HorizontalAlignment="Left" Margin="30,0,0,10" Foreground="LightGray" TextAlignment="Center" TextWrapping="Wrap" VerticalAlignment="Bottom" FontWeight="Bold"  Width="95" Height="25"/>-->
        </Grid>

        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,10,0" Grid.Column="1" VerticalAlignment="Top" Height="55" Grid.Row="2">
            <TextBox Name="txtMonto" Visibility="Collapsed" HorizontalAlignment="Right" Height="26" Margin="0,16,10,0" Grid.Row="1" Text="{Binding Monto, StringFormat=N3, Mode=TwoWay, ValidatesOnDataErrors=True, ValidatesOnExceptions=True}" TextWrapping="Wrap" TabIndex="0" TextAlignment="Right" Width="90"  Grid.Column="1" VerticalAlignment="Top"/>
            <Button Height="55"  Visibility="Collapsed" Margin="0" Name="btnAceptar" Width="55" IsDefault="True">
                <Image Width="40" Height="40" Source="/Images/check.png" />
            </Button>
            <Button Height="50"  Visibility="Collapsed" Margin="0" Name="btnNotaDebito" Width="50" IsDefault="True">
                <Image Width="35" Height="35" Source="/Images/NotaDebito.png" />
            </Button>
            <Button Height="50"  Visibility="Collapsed" Margin="0" Name="btnNotaCredito" Width="50" IsDefault="True">
                <Image Width="35" Height="35" Source="/Images/NotaCredito.png" />
            </Button>
            <Button Height="55" HorizontalAlignment="Left" Margin="0" Name="btnWhatsApp" VerticalAlignment="Top" Width="55" Visibility="Visible">
                <Image Width="55" Height="55" Source="/Images/appbar_whatsapp.png"/>
            </Button>
            <Button Height="55"   Margin="0" Name="btnPrint" Width="55" IsCancel="False">
                <Image Width="40" Height="40" Source="/Images/Cuotas.png" />
            </Button>
            <Button Height="55"   Margin="0" Name="btnSalir" Width="55" IsCancel="False">
                <Image Width="40" Height="40" Source="/Images/back.png" />
            </Button>
        </StackPanel>
        <TextBlock Foreground="Red" FontWeight="Bold" VerticalAlignment="Center" Name="lblAtraso" Text="lblAtraso" Grid.Row="2" HorizontalAlignment="Left" Width="144" Margin="10,19,0,19" Height="32" Grid.Column="1"/>

        <TextBlock Foreground="Red" FontWeight="Bold" VerticalAlignment="Center" x:Name="lblMinimumPayment" Text="lblMinimumPayment" Grid.Row="2" Margin="0,19,414,19" Height="32" Grid.Column="1" HorizontalAlignment="Right" Width="179"/>

    </Grid>
</Window>
